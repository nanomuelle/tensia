<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tensia</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header fijo -->
    <header class="header">
      <span class="header__logo" aria-hidden="true">ü©∫</span>
      <h1 class="header__title">Tensia</h1>
    </header>

    <main class="main">
      <!-- Bot√≥n de acci√≥n principal -->
      <section class="nueva-medicion">
        <button
          id="btn-nueva-medicion"
          class="btn btn--primario"
          aria-label="Registrar nueva medici√≥n"
        >
          + Nueva medici√≥n
        </button>
      </section>

      <!-- Formulario de registro manual (oculto por defecto) -->
      <section
        id="formulario-registro"
        class="formulario-registro"
        aria-label="Registro de medici√≥n manual"
        hidden
      >
        <h2 class="formulario__titulo">Nueva medici√≥n</h2>

        <form id="form-medicion" novalidate>
          <!-- Sist√≥lica -->
          <div class="campo">
            <label class="campo__label" for="input-systolic">
              Sist√≥lica <span class="campo__requerido" aria-hidden="true">*</span>
            </label>
            <div class="campo__fila">
              <input
                id="input-systolic"
                name="systolic"
                type="number"
                class="campo__input"
                inputmode="numeric"
                min="1"
                placeholder="ej. 120"
                required
                aria-required="true"
                aria-describedby="error-systolic"
              />
              <span class="campo__unidad" aria-hidden="true">mmHg</span>
            </div>
            <span id="error-systolic" class="campo__error" role="alert" hidden></span>
          </div>

          <!-- Diast√≥lica -->
          <div class="campo">
            <label class="campo__label" for="input-diastolic">
              Diast√≥lica <span class="campo__requerido" aria-hidden="true">*</span>
            </label>
            <div class="campo__fila">
              <input
                id="input-diastolic"
                name="diastolic"
                type="number"
                class="campo__input"
                inputmode="numeric"
                min="1"
                placeholder="ej. 80"
                required
                aria-required="true"
                aria-describedby="error-diastolic"
              />
              <span class="campo__unidad" aria-hidden="true">mmHg</span>
            </div>
            <span id="error-diastolic" class="campo__error" role="alert" hidden></span>
          </div>

          <!-- Pulso (opcional) -->
          <div class="campo">
            <label class="campo__label" for="input-pulse">
              Pulso <span class="campo__opcional">(opcional)</span>
            </label>
            <div class="campo__fila">
              <input
                id="input-pulse"
                name="pulse"
                type="number"
                class="campo__input"
                inputmode="numeric"
                min="1"
                placeholder="ej. 72"
                aria-describedby="error-pulse"
              />
              <span class="campo__unidad" aria-hidden="true">ppm</span>
            </div>
            <span id="error-pulse" class="campo__error" role="alert" hidden></span>
          </div>

          <!-- Fecha y hora -->
          <div class="campo">
            <label class="campo__label" for="input-fecha">
              Fecha y hora <span class="campo__requerido" aria-hidden="true">*</span>
            </label>
            <input
              id="input-fecha"
              name="measuredAt"
              type="datetime-local"
              class="campo__input campo__input--fecha"
              required
              aria-required="true"
              aria-describedby="error-fecha"
            />
            <span id="error-fecha" class="campo__error" role="alert" hidden></span>
          </div>

          <!-- Error global del formulario (respuesta del backend) -->
          <div id="error-formulario" class="formulario__error" role="alert" hidden></div>

          <!-- Acciones -->
          <div class="formulario__acciones">
            <button type="submit" id="btn-guardar" class="btn btn--primario">
              Guardar medici√≥n
            </button>
            <button type="button" id="btn-cancelar" class="btn btn--secundario">
              Cancelar
            </button>
          </div>
        </form>
      </section>

      <!-- Secci√≥n historial -->
      <section class="historial">
        <h2 class="historial__titulo">Historial</h2>

        <!-- Estado: cargando -->
        <div
          id="estado-cargando"
          class="estado estado--cargando"
          aria-live="polite"
          aria-label="Cargando"
          hidden
        >
          <span class="spinner" aria-hidden="true"></span>
          <span>Cargando mediciones‚Ä¶</span>
        </div>

        <!-- Estado: error -->
        <div
          id="estado-error"
          class="estado estado--error"
          role="alert"
          hidden
        >
          <span>‚ö†Ô∏è No se pudieron cargar las mediciones.</span>
          <button id="btn-reintentar" class="btn btn--secundario">
            Reintentar
          </button>
        </div>

        <!-- Estado: sin mediciones -->
        <div id="estado-vacio" class="estado estado--vacio" hidden>
          <p>Sin mediciones todav√≠a.</p>
          <p>Pulsa "Nueva medici√≥n" para registrar la primera.</p>
        </div>

        <!-- Lista de mediciones -->
        <ul
          id="lista-mediciones"
          class="lista-mediciones"
          role="list"
          aria-label="Historial de mediciones"
        ></ul>
      </section>
    </main>

    <script type="module" src="../src/app.js"></script>
  </body>
</html>
