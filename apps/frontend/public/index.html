<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tensia</title>

    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json" />

    <!-- Meta tags para instalaciÃ³n en iOS (Safari no usa el manifest para esto) -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Tensia" />
    <meta name="theme-color" content="#2563eb" />

    <link rel="stylesheet" href="styles/main.css" />

    <!-- Mapa de importaciÃ³n para D3 (sin bundler â€” ADR-003, ADR-006) -->
    <!-- El SW cachea estas URLs para uso offline -->
    <script type="importmap">
    {
      "imports": {
        "d3-selection": "https://cdn.jsdelivr.net/npm/d3-selection@3/+esm",
        "d3-scale":     "https://cdn.jsdelivr.net/npm/d3-scale@4/+esm",
        "d3-axis":      "https://cdn.jsdelivr.net/npm/d3-axis@3/+esm",
        "d3-shape":     "https://cdn.jsdelivr.net/npm/d3-shape@3/+esm"
      }
    }
    </script>
  </head>
  <body>
    <!-- Aviso informativo Safari/iOS: localStorage puede borrarse tras 7 dÃ­as de inactividad (ITP) -->
    <!-- El contenido lo genera IosWarning.mount() (Paso 14a) -->
    <div
      id="aviso-ios"
      class="aviso-ios"
      role="alert"
      aria-live="polite"
      hidden
    ></div>
    <!-- Header fijo -->
    <header class="header">
      <span class="header__logo" aria-hidden="true">ðŸ©º</span>
      <h1 class="header__title">Tensia</h1>
    </header>

    <!-- HomeView.mount() genera todo el contenido de <main> (Paso 14f) -->
    <!-- Toast.mount() crea su propio contenedor y lo aÃ±ade a <body> (Paso 14b) -->
    <main class="main"></main>

    <script type="module" src="src/app.js"></script>

    <!-- Registro del Service Worker -->
    <script>
      // Registro del SW (solo si el navegador lo soporta)
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch((err) => {
          console.warn('[Tensia] No se pudo registrar el Service Worker:', err);
        });
      }
    </script>
  </body>
</html>
